<div class="row gy-3">
  <h3 class="mb-3 display-4">Dettagli profilo</h3>
  <div class="col-12" *ngIf="doctor">
    <div class="row p-2">
      <div class="col-12 col-sm-2 col-md-1 mb-3 mb-md-0">
        <div class="position-relative text-center">
          <img
            class="w-100 rounded-1 object-fit-cover object-position-center"
            [src]="
              doctor.avatar
                ? doctor.avatar
                : 'https://ui-avatars.com/api/?name=' +
                  doctor.name +
                  '+' +
                  doctor.surname
            "
            alt="profile image"
          />
          <input
            type="file"
            accept="image/*"
            (change)="onFileSelected($event)"
            #fileInput
            hidden
          />
          <app-btn
            class="position-absolute end-0 bottom-0 me-1 mb-1"
            [extraClass]="'position-relative w-fixed-30 h-fixed-30'"
            [type]="'button'"
            [color]="'btn-primary'"
            (onClick)="fileInput.click()"
          >
            <ng-icon
              class="position-absolute start-50 top-50 translate-middle"
              name="ionCloudUploadOutline"
            ></ng-icon>
          </app-btn>
        </div>
      </div>
      <div class="col-12 col-sm-10 col-md-11 ps-3 position-relative">
        <div class="d-flex gap-2 position-absolute end-0 mt-2 me-2">
          <app-btn-primary-filled
            [type]="'button'"
            *ngIf="edit"
            (onClick)="update(doctor.id, doctor)"
            >Salva</app-btn-primary-filled
          >
          <app-btn-dark-filled [type]="'button'" (onClick)="edit = !edit">{{
            !edit ? "Modifica" : "Annulla"
          }}</app-btn-dark-filled>
        </div>
        <h6 class="fw-bold fs-1">{{ doctor.name }} {{ doctor.surname }}</h6>
        <div class="row align-items-center py-2">
          <div class="col-12 col-md-2">
            <p class="mb-0 fw-semibold">Titolo:</p>
          </div>
          <div class="col-12 col-md-10">
            <input
              *ngIf="edit"
              class="form-control form-control-sm w-auto border-secondary shadow-sm"
              type="text"
              id="title"
              name="title"
              [(ngModel)]="doctor.title"
            />
            <p class="mb-0" *ngIf="!edit">
              {{ doctor.title ? doctor.title : "---------" }}
            </p>
          </div>
        </div>
        <div class="row align-items-center py-2">
          <div class="col-12 col-md-2">
            <p class="mb-0 fw-semibold">Licenza:</p>
          </div>
          <div class="col-12 col-md-10">
            <input
              *ngIf="edit"
              class="form-control form-control-sm w-auto border-secondary shadow-sm"
              type="text"
              id="licenceNumber"
              name="licenceNumber"
              [(ngModel)]="doctor.licenceNumber"
            />
            <p class="mb-0" *ngIf="!edit">{{ doctor.licenceNumber }}</p>
          </div>
        </div>
        <div class="row align-items-center py-2">
          <div class="col-12 col-md-2">
            <p class="mb-0 fw-semibold">Numero di telefono:</p>
          </div>
          <div class="col-12 col-md-10">
            <input
              *ngIf="edit"
              class="form-control form-control-sm w-auto border-secondary shadow-sm"
              type="text"
              id="phoneNumber"
              name="phoneNumber"
              [(ngModel)]="doctor.phoneNumber"
            />
            <p class="mb-0" *ngIf="!edit">{{ doctor.phoneNumber }}</p>
          </div>
        </div>
        <div class="mt-3 position-relative" *ngIf="!isAdmin">
          <div class="d-flex gap-2 position-absolute end-0 mt-2 me-2">
            <app-btn-primary-filled
              [type]="'button'"
              *ngIf="editLoginInfo"
              (onClick)="updateLoginInfo()"
              >Salva</app-btn-primary-filled
            >
            <app-btn-dark-filled
              [type]="'button'"
              (onClick)="editLoginInfo = !editLoginInfo"
              >{{
                !editLoginInfo ? "Modifica" : "Annulla"
              }}</app-btn-dark-filled
            >
          </div>
          <h6 class="fw-bold">Dati di accesso</h6>
          <div class="row align-items-center py-2">
            <div class="col-12 col-md-2">
              <p class="mb-0 fw-semibold">Email:</p>
            </div>
            <div class="col-12 col-md-10">
              <p class="mb-0" *ngIf="!editLoginInfo">{{ doctor.email }}</p>
              <input
                *ngIf="editLoginInfo"
                class="form-control form-control-sm w-auto border-secondary shadow-sm"
                type="text"
                id="email"
                name="email"
                [(ngModel)]="doctor.email"
              />
            </div>
          </div>
          <div class="row align-items-center py-2">
            <div class="col-12 col-md-2">
              <p class="mb-0 fw-semibold">Password:</p>
            </div>
            <div class="col-12 col-md-10">
              <p class="mb-0" *ngIf="!editLoginInfo">****************</p>
              <div
                *ngIf="editLoginInfo"
                class="d-flex align-items-center gap-2"
              >
                <div class="position-relative">
                  <input
                    class="form-control form-control-sm w-auto border-secondary shadow-sm"
                    [type]="!showOldPassword ? 'password' : 'text'"
                    id="oldPassword"
                    name="oldPassword"
                    [(ngModel)]="loginUpdate.oldPassword"
                    placeholder="Vecchia password"
                  />
                  <ng-icon
                    role="button"
                    class="position-absolute top-50 end-0 translate-middle-y me-2 opacity-50"
                    [name]="
                      showOldPassword ? 'ionEyeOffOutline' : 'ionEyeOutline'
                    "
                    (click)="showOldPassword = !showOldPassword"
                  ></ng-icon>
                </div>
                <div class="position-relative">
                  <input
                    class="form-control form-control-sm w-auto border-secondary shadow-sm"
                    [type]="!showNewPassword ? 'password' : 'text'"
                    id="newPassword"
                    name="newPassword"
                    placeholder="Nuova password"
                    [(ngModel)]="loginUpdate.newPassword"
                  />
                  <ng-icon
                    role="button"
                    class="position-absolute top-50 end-0 translate-middle-y me-2 opacity-50"
                    [name]="
                      showNewPassword ? 'ionEyeOffOutline' : 'ionEyeOutline'
                    "
                    (click)="showNewPassword = !showNewPassword"
                  ></ng-icon>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-12" *ngIf="doctor">
    <app-specializations [doctor]="doctor"></app-specializations>
  </div>
  <div class="col-12" *ngIf="doctor">
    <app-experiences [doctor]="doctor"></app-experiences>
  </div>
  <div class="col-12" *ngIf="doctor">
    <app-trainings [doctor]="doctor"></app-trainings>
  </div>
</div>
